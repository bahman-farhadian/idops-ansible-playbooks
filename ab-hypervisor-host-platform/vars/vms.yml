---
# VM Clone Configuration
# Edit only this file to configure clone and cleanup behavior.
# This is the single source of user-editable variables for this project.

# -------------------------------------------------------------------------
# Hypervisor connection
# -------------------------------------------------------------------------
# SSH hostname or user@ip of your KVM hypervisor
# Examples:
#   kvm_host: "Silenus"                    # SSH config name
#   kvm_host: "root@192.168.48.12"         # Direct IP with user
#   kvm_host: "admin@kvm.example.com"      # FQDN with user
kvm_host: "Selene"
hypervisor_python_interpreter: "/usr/bin/python3"

# -------------------------------------------------------------------------
# Template and storage configuration
# -------------------------------------------------------------------------
template_vm: "debian-trixie"
# Directory must exist on the KVM host (not on the control node).
# Common values:
#   /var/lib/libvirt/images
#   /home/libvirt/images
#   /btbssd/QEMUKVM/stgPool
disk_pool: "/home/bahman/b/QEMUKVM/isoPool"

# -------------------------------------------------------------------------
# Network configuration (applied to all VMs)
# -------------------------------------------------------------------------
guest_interface: "enp1s0"
network_prefix: "24"
network_gateway: "192.168.24.1"
dns_servers: "8.8.8.8"

# -------------------------------------------------------------------------
# Snapshot configuration
# -------------------------------------------------------------------------
create_snapshot: true                      # Create snapshot after cloning
snapshot_name: "snapshot-a"                # Name of snapshot (matches template)
snapshot_description: "initial configuration"
start_after_snapshot: true                 # Start VMs after creating snapshot

# -------------------------------------------------------------------------
# Behavior options
# -------------------------------------------------------------------------
restart_template_after: false   # Start template VM after cloning is complete
wait_for_ssh: true              # Wait for each VM to be reachable before continuing
confirm_delete: false           # cleanup-vms.yml safety flag (keep false by default)
clone_mode: "auto"              # auto | sequential | parallel
clone_async_timeout_sec: 1800   # Max seconds allowed for each virt-clone job
clone_wait_retries: 180         # Poll attempts while waiting for clone jobs
clone_wait_delay_sec: 10        # Delay between poll attempts (seconds)

# -------------------------------------------------------------------------
# VM Definitions
# -------------------------------------------------------------------------
# Define your VMs here. Each VM needs:
#   - name: hostname and VM name (used for disk file too)
#   - ip: static IP address
#   - vcpu: number of virtual CPUs
#   - ram_mb: RAM in megabytes
#
# Example minimal entry:
#   - name: "test-vm-01"
#     ip: "192.168.32.50"
#     vcpu: 1
#     ram_mb: 1024
#
# Example small lab set:
#   - name: "lab-web-01"
#     ip: "192.168.32.21"
#     vcpu: 2
#     ram_mb: 2048
#   - name: "lab-db-01"
#     ip: "192.168.32.22"
#     vcpu: 4
#     ram_mb: 4096

vms:
  - name: "debian-trixie-repo-nexus"
    ip: "192.168.24.100"
    vcpu: 2
    ram_mb: 2048

# -------------------------------------------------------------------------
# Example: Add more VMs by copying the format above
# -------------------------------------------------------------------------
#   - name: "worker-01"
#     ip: "192.168.32.20"
#     vcpu: 2
#     ram_mb: 1024
#
#   - name: "worker-02"
#     ip: "192.168.32.21"
#     vcpu: 2
#     ram_mb: 1024
